# 장고 Forms



목차  
------

[1. HTML Form](#1.-HTML-FORM)

[2. HTTPRequest & HTTPResponse](#2.-HTTPRequest-&-HTTPResponse)

[3. CSR](#3.-CSR)

[4. ModelForm](#4,-ModelForm)

[5. Form Valication](#5,-Form-Valication)

[6. Message Framework](#6.-Message-Framework)

[7.Forms를 통한 삭제 구현](#7.-Forms를-통한-삭제-구현)

   



##  1. HTML Form

### 개요

* HTML  Form
  * 사용장에게 입력폼을 제공하고 이를 서버로 전송한다. <form> 태그 활용 
* Django Form
  * 유효성을 검사한다. 
  * Get/Post 요청을 보내면 서버에서 응답 HTML을 보내줌

### HTML Form

* 구성요소

  * < form>  태그 - 입력폼 구성
  * action - 요청을 보내 주소임. 해당 url로 데이터 전송을 시도
  * method : 전송방식
    * Get - 데이터 조회시 활용
    * Post - 생성/수정/삭제에서 사용
  * enctype - 인코딩 방식
  * widget 

* 코드

  ```html
  <form action="" method="POST">
      <input type="text" /> <!-- 1줄 문자열 입력 -->
      <textarea></textarea> <!-- 1줄 이상의 문자열 입력 -->
      <select></select> <!-- 항목 중 택일 -->
      <input type="checkbox" /> <!-- 체크박스 (한 그룹 내 여러 항목을 다수 선택 가능) -->
      <input type="radio" /> <!-- 라디오박스 (한 그룹 내 여러 항목 중에 하나만 선택 가능) -->
      그 외 다수 위젯
  </form>
  ```

*  Form의 enctype

  * "application/x-www-form-urlencoded" (디폴트)

    Get 방식에서 강제됨   

    파일 업로드는 불가

    URL 인코딩을 통해서 인자들을 QueryString 형태로 전달

    <img src="images\url인코딩.png" style="zoom:80%;" />

  * "multipart/form-data"

    * 파일 업로드 가능

### url encode

*  key=value의 값의 쌍이 & 문자로 이어진 형태

* utf8 인코딩 방식을 사용한다. 

  ```python
  from urllib.parse import urlencode
  print(urlencode({'key1': 'value1', 'key2': 10, 'name': '방탄소년단'}))
  print('방탄소년단'.encode('utf8'))
  print(''.join('%{:X}'.format(ch) for ch in '방탄소년단'.encode('utf8')))
  
  ### 결과 
  key1=value1&key2=10&name=%EB%B0%A9%ED%83%84%EC%86%8C%EB%85%84%EB%8B%A8
  b'\xeb\xb0\xa9\xed\x83\x84\xec\x86\x8c\xeb\x85\x84\xeb\x8b\xa8'
  %EB%B0%A9%ED%83%84%EC%86%8C%EB%85%84%EB%8B%A8
  ```

### Form Method

* Form  요청에서 인자를 보내는 2가지 방법

* 요청 URL 뒤에 ? 를 붙이고 인자를 실어서 보내기

  *  QueryString 활용 

* 요청 Body에 모든 인코딩의 인자를 실어서 보내는 방법

  * Get 요청에서는 Header만 존재한다. 
  * Post 요청에서는 Body 존재한다. 
  * Client ->  서버로 요청하거나 서버에서 응답할때도 사용한다.

* Get 방식

  * 메세지만 보낼 수 있다.

  * Header 만 있다.

    ```html
    <form method="GET" action="">
        <input type="text" name="query" />
        <input type="submit" value="검색" />
    </form>
    ```

    <form method="GET" action="">
        <input type="text" name="query" />
        <input type="submit" value="검색" />
    </form>

    

    ```html
    ## 이렇게 하면 안됨
    <form method="GET" action="">
        <input type="text" name="title" />
        <textarea name="content"></textarea>
        <input type="file" name="photo" />
        <input type="submit" value="저장" />
    </form>
    ```

    

* Post 방식

  * 데이터도 보낼 수 있다.

  * Header + Body가 있다.

    ```html
    <form method="POST" action="" enctype="multipart/form-data">
        <input type="text" name="title" />
        <textarea name="content"></textarea>
        <input type="file" name="photo" />
        <input type="submit" value="저장" />
    </form>
    ```

* 장고 View 에서의 인자 접근

  * request.GET
    * 모든 QueryString 인자 목록
    * QueryString을 파싱한 QueryDict 객체
    * GET/POST 요청에서 모두 가능
  * request.POST
    * POST 요청에서만 가능.
    * 파일 내역은 제외한 모든 POST인자 목록
    * "요청 BODY"를 파싱한 QueryDict 객체
  * request.FILES
    * POST 요청에서만 가능.
    * "요청 BODY"에서 파일내역만 파싱한 MultiValueDict 객체

[목차로 이동](#목차)   

## 2. HTTPRequest & HTTPResponse

[목차로 이동](#목차)   

## 3. CSR

[목차로 이동](#목차)   

## 4. ModelForm

[목차로 이동](#목차)   

## 5. Form Valication

[목차로 이동](#목차)   

## 6. Message Framework

[목차로 이동](#목차)   

## 7. Forms를 통한 삭제 구현

[목차로 이동](#목차)   

